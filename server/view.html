<html>
	<head>
		<style>
			#content
			{
				position: fixed;
				top: 50%;
				left: 50%;
				-webkit-transform: translate(-50%, -50%);
				transform: translate(-50%, -50%);
			}
			#footer
			{
			    bottom: 2px;
			    right: 5px;
			    position: absolute;
				color: white;
			}
			a
			{
				text-decoration: none;
				color: inherit;
			}
			pre
			{
				margin-top: 0px;
				margin-bottom: 0px;
			}
		</style>
	</head>
	<body background="files/background.png">
		<div id="content"></div>
		<div id="footer"><a href="https://github.com/M4GNV5">Github</a> - <a href="https://twitter.com/M46NV5">Twitter</a></div>
		<script type="text/javascript">
			var content = document.getElementById("content");
		
			var display = {
				"png": "<img src=\"%url\" />",
				"mp4": "<video src=\"%url\" controls autoplay></video>",
				"txt": function(url)
				{
					var done = 0;
					var text;
					function finish()
					{
						if(this && this.responseText)
							text = this.responseText;
						
						done++;
						if(done != 3)
							return;
						console.log(JSON.stringify(text));
							
						content.style = "width: 600px; height: 400px;";
						content.innerHTML = "<pre><code>" + text + "</code></pre>";
						hljs.highlightBlock(content);
					}
					
					loadStyle("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/railscasts.min.css", finish);
					loadScript("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js", finish);
					
					var req = new XMLHttpRequest();
					req.addEventListener("load", finish);
					req.open("GET", url);
					req.send();
				}
			};
			
			function loadStyle(url, cb)
			{
				var file = document.createElement("link");
				file.rel = "stylesheet";
				file.href = url;
				file.onload = cb;
				document.getElementsByTagName("head")[0].appendChild(file);
			}
			function loadScript(url, cb)
			{
				var file = document.createElement("script");
				file.src = url;
				file.onload = cb;
				document.getElementsByTagName("head")[0].appendChild(file);
			}
			
			var file = window.location.pathname;
			var fileUrl = document.URL.replace(file, "/files" + file);
			var ending = file.substr(file.lastIndexOf(".") + 1);
			
			if(typeof display[ending] == "function")
				display[ending](fileUrl);
			else
				content.innerHTML = display[ending].toString().replace(/%url/g, fileUrl);
		</script>
	</body>
</html>